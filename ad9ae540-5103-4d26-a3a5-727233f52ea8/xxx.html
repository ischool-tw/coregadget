<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript">
    function getUrlVars() {
        var vars = [], hash;
        var p = window.location.href.slice(window.location.href.indexOf('?') + 1);
        if (p.indexOf("#") >= 0) {
            p = p.substring(0, p.indexOf("#"));
        }
        var hashes = p.split('&');
        for (var i = 0; i < hashes.length; i++) {
            hash = decodeURI(hashes[i]);
            var key = hash.substring(0, hash.indexOf("="));
            vars.push(key);
            vars[key] = hash.substring(hash.indexOf("=") + 1);
        }
        return vars;
    };

    // var resp = getUrlVars()["resp"];
    // if (resp) {
    //     // alert(decodeURIComponent(resp));
    //     $('#file_info', window.parent.document).append(decodeURIComponent(resp));
    // }

    // 成功方案一：
    // var getResponse = function() {
    //     var x = getUrlVars();
    //     var resp = x["resp"];
    //     debugger
    //     $('#file_info', window.parent.parent.document).append(decodeURIComponent(resp));
    // }();

    // 成功方案二：需搭配iframe_upload的 fileinfo()
    var resp = getUrlVars();
    if (resp) {
        var obj = jQuery.parseJSON(decodeURIComponent(resp["resp"]));
        debugger
        var funName = decodeURIComponent(resp["fn"]);
        eval('parent.parent.' + funName)(obj);
    }
</script>
</head>
</html>